(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4307)}])},8286:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var t=a(4848);a(6540);var s=a(6990),n=a(4212);let i=(0,s.F)("inline-flex w-fit items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),r),...s})}},551:(e,r,a)=>{"use strict";a.d(r,{$:()=>o,r:()=>d});var t=a(4848),s=a(6540),n=a(3362),i=a(6990),l=a(4212);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:a,variant:s,size:i,asChild:o=!1,...c}=e,f=o?n.DX:"button";return(0,t.jsx)(f,{className:(0,l.cn)(d({variant:s,size:i,className:a})),ref:r,...c})});o.displayName="Button"},1741:(e,r,a)=>{"use strict";a.d(r,{Wu:()=>l,Zp:()=>i});var t=a(4848),s=a(6540),n=a(4212);let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});i.displayName="Card",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...s})});l.displayName="CardContent",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8755:(e,r,a)=>{"use strict";a.d(r,{$k:()=>i,a$:()=>n,jv:()=>l,yc:()=>s});let t=(0,a(5183).UU)("https://ptakgadlsitwkrgpgwhe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YWtnYWRsc2l0d2tyZ3Bnd2hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjE4NjQ0MzUsImV4cCI6MjAzNzQ0MDQzNX0.9eRCdNNJJ3qSqiTXlWSgoH7ZCYfVtM5xyDZy7LZgIqI",{auth:{localStorage:!0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),s=["Medicover","Multisport","Classic","No card"],n={async getAllPlayers(){let{data:e,error:r}=await t.from("players").select("*").order("name");if(r)throw r;return e},async addPlayer(e,r){let{data:a,error:s}=await t.from("players").insert([{name:e,cardType:r}]).select().single();if(s)throw s;return a},async editPlayer(e,r,a){let{data:s,error:n}=await t.from("players").update({name:r,cardType:a}).eq("id",e).select().single();if(n)throw n;return s},async removePlayer(e){let{error:r}=await t.from("players").delete().eq("id",e);if(r)throw r}},i={async getAllReservationLists(){let{data:e,error:r}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at, cardType)\n        )\n      ").order("created_at",{ascending:!0});if(r)throw r;return e.map(e=>({id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}))},async addReservationList(e,r){console.log("Adding reservation list:",e,r);let{data:a,error:s}=await t.from("reservation_lists").insert([{name:e}]).select().single();if(s)throw s;if(r.length>0){let e=r.map(e=>({reservation_id:a.id,player_id:e})),{error:s}=await t.from("player_reservations").insert(e);if(s)throw s}let{data:n,error:i}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at, cardType)\n        )\n      ").eq("id",a.id).single();if(i)throw i;return{id:n.id,name:n.name,created_at:n.created_at,players:n.players.map(e=>e.players)}},async removeReservationList(e){let{error:r}=await t.from("reservation_lists").delete().eq("id",e);if(r)throw r},async updateReservationPlayers(e,r){let{error:a}=await t.from("player_reservations").delete().eq("reservation_id",e);if(a)throw a;if(r.length>0){let a=r.map(r=>({reservation_id:e,player_id:r})),{error:s}=await t.from("player_reservations").insert(a);if(s)throw s}}},l={async addEvent(e,r){let{data:a,error:s}=await t.from("events").insert([{name:e}]).select().single();if(s)throw s;if(r.length>0){let e=r.map(e=>({event_id:a.id,player_id:e})),{error:s}=await t.from("player_events").insert(e);if(s)throw s}let{data:n,error:i}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at, cardType)\n        )\n      ").eq("id",a.id).single();if(i)throw i;return{id:n.id,name:n.name,created_at:n.created_at,players:n.players.map(e=>e.players)}},async getLastEvent(){let{data:e,error:r}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at, cardType)\n        )\n      ").order("created_at",{ascending:!1}).limit(1).single();if(r)throw r;return e?{id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}:null},async updateEvent(e,r,a){let{error:s}=await t.from("events").update({name:r}).eq("id",e);if(s)throw s;let{error:n}=await t.from("player_events").delete().eq("event_id",e);if(n)throw n;if(a.length>0){let r=a.map(r=>({event_id:e,player_id:r})),{error:s}=await t.from("player_events").insert(r);if(s)throw s}}}},4212:(e,r,a)=>{"use strict";a.d(r,{cn:()=>n});var t=a(4164),s=a(856);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}},4307:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>T,metadata:()=>R});var t=a(4848),s=a(6540),n=a(1741),i=a(8755),l=a(6471);let d=(0,l.A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),o=(0,l.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var c=a(2133),f=a(263),m=a(8200),p=a(2579),u="Avatar",[y,h]=(0,c.A)(u),[v,g]=y(u),x=s.forwardRef((e,r)=>{let{__scopeAvatar:a,...n}=e,[i,l]=s.useState("idle");return(0,t.jsx)(v,{scope:a,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,t.jsx)(p.sG.span,{...n,ref:r})})});x.displayName=u;var w="AvatarImage",N=s.forwardRef((e,r)=>{let{__scopeAvatar:a,src:n,onLoadingStatusChange:i=()=>{},...l}=e,d=g(w,a),o=function(e,r){let[a,t]=s.useState("idle");return(0,m.N)(()=>{if(!e){t("error");return}let a=!0,s=new window.Image,n=e=>()=>{a&&t(e)};return t("loading"),s.onload=n("loaded"),s.onerror=n("error"),s.src=e,r&&(s.referrerPolicy=r),()=>{a=!1}},[e,r]),a}(n,l.referrerPolicy),c=(0,f.c)(e=>{i(e),d.onImageLoadingStatusChange(e)});return(0,m.N)(()=>{"idle"!==o&&c(o)},[o,c]),"loaded"===o?(0,t.jsx)(p.sG.img,{...l,ref:r,src:n}):null});N.displayName=w;var b="AvatarFallback",_=s.forwardRef((e,r)=>{let{__scopeAvatar:a,delayMs:n,...i}=e,l=g(b,a),[d,o]=s.useState(void 0===n);return s.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==l.imageLoadingStatus?(0,t.jsx)(p.sG.span,{...i,ref:r}):null});_.displayName=b;var j=a(4212);let k=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(x,{ref:r,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});k.displayName=x.displayName,s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(N,{ref:r,className:(0,j.cn)("aspect-square h-full w-full",a),...s})}).displayName=N.displayName;let C=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(_,{ref:r,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});C.displayName=_.displayName;var M=a(8286),I=a(551);let R={title:"Player Reservation App",description:"Manage players and reservations"},E=["Medicover","Multisport","Classic","No card"];function T(e){let{children:r}=e,[a,l]=(0,s.useState)(!0),[c,f]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{let e=await i.jv.getLastEvent();f(e)}catch(e){console.error("Failed to load event:",e)}finally{l(!1)}})()},[]),a)return(0,t.jsx)("div",{children:"Loading..."});if(!c)return(0,t.jsx)("div",{children:"No event found"});function m(e){switch(e){case"Medicover":return"bg-blue-100 text-blue-800";case"Multisport":return"bg-green-100 text-green-800";case"Classic":return"bg-yellow-100 text-yellow-800";case"No card":return"bg-orange-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}}let p=c.players.reduce((e,r)=>(e[r.cardType]=(e[r.cardType]||0)+1,e),{}),u=E.map(e=>({type:e,count:p[e]||0})),y=[...c.players].sort((e,r)=>E.indexOf(e.cardType)-E.indexOf(r.cardType));return(0,t.jsxs)("div",{className:"space-y-8 container mx-auto p-4",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#2E2A5D] to-[#7B3C7D] text-white rounded-lg p-6 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 sm:mb-0",children:c.name}),(0,t.jsx)(I.$,{asChild:!0,className:"bg-white hidden w-full text-[#2E2A5D] hover:bg-gray-100 transition-colors duration-200 sm:w-fit sm:flex",children:(0,t.jsxs)("a",{target:"_blank",href:"https://rooman.github.io/ffp-2?mc=".concat(p.Medicover,"&ms=").concat(p.Multisport,"&msc=").concat(p.Classic,"&nc=").concat(p["No card"]),children:[(0,t.jsx)(d,{className:"w-4 h-4 mr-2"}),"Calculate"]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center ",children:[(0,t.jsx)(o,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("span",{children:[c.players.length," Players"]})]}),u.map(e=>{let{type:r,count:a}=e;return(0,t.jsxs)(M.E,{className:"".concat(m(r)," text-xs"),children:[r,": ",a]},r)})]}),(0,t.jsx)(I.$,{asChild:!0,className:"mt-4 bg-white w-full text-[#2E2A5D] hover:bg-gray-100 transition-colors duration-200 sm:hidden",children:(0,t.jsxs)("a",{target:"_blank",href:"https://rooman.github.io/ffp-2?mc=".concat(p.Medicover,"&ms=").concat(p.Multisport,"&msc=").concat(p.Classic,"&nc=").concat(p["No card"]),children:[(0,t.jsx)(d,{className:"w-4 h-4 mr-2"}),"Calculate"]})})]})}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(y||[]).map(e=>e?(0,t.jsx)(n.Zp,{className:" transition-colors duration-200",children:(0,t.jsxs)(n.Wu,{className:"flex items-center p-4",children:[(0,t.jsx)(k,{className:"h-10 w-10 mr-4",children:(0,t.jsx)(C,{className:"bg-[#7B3C7D] text-white",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[#2E2A5D] font-medium",children:e.name}),(0,t.jsx)(M.E,{className:"mt-1 ".concat(m(e.cardType)),children:e.cardType})]})]})},e.id):null)})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[399,636,593,792],()=>r(2022)),_N_E=e.O()}]);