(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3527)}])},1741:(e,a,r)=>{"use strict";r.d(a,{Wu:()=>i,Zp:()=>n});var t=r(4848),s=r(6540),l=r(4212);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});n.displayName="Card",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})}).displayName="CardHeader",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...s})}).displayName="CardTitle",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...s})});i.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},8755:(e,a,r)=>{"use strict";r.d(a,{$k:()=>l,a$:()=>s,jv:()=>n});let t=(0,r(5183).UU)("https://ptakgadlsitwkrgpgwhe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YWtnYWRsc2l0d2tyZ3Bnd2hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjE4NjQ0MzUsImV4cCI6MjAzNzQ0MDQzNX0.9eRCdNNJJ3qSqiTXlWSgoH7ZCYfVtM5xyDZy7LZgIqI",{auth:{localStorage:!0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),s={async getAllPlayers(){let{data:e,error:a}=await t.from("players").select("*").order("name");if(a)throw a;return e},async addPlayer(e){let{data:a,error:r}=await t.from("players").insert([{name:e}]).select().single();if(r)throw r;return a},async editPlayer(e,a){let{data:r,error:s}=await t.from("players").update({name:a}).eq("id",e).select().single();if(s)throw s;return r},async removePlayer(e){let{error:a}=await t.from("players").delete().eq("id",e);if(a)throw a}},l={async getAllReservationLists(){let{data:e,error:a}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at)\n        )\n      ").order("created_at",{ascending:!0});if(a)throw a;return e.map(e=>({id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}))},async addReservationList(e,a){console.log("Adding reservation list:",e,a);let{data:r,error:s}=await t.from("reservation_lists").insert([{name:e}]).select().single();if(s)throw s;if(a.length>0){let e=a.map(e=>({reservation_id:r.id,player_id:e})),{error:s}=await t.from("player_reservations").insert(e);if(s)throw s}let{data:l,error:n}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at)\n        )\n      ").eq("id",r.id).single();if(n)throw n;return{id:l.id,name:l.name,created_at:l.created_at,players:l.players.map(e=>e.players)}},async removeReservationList(e){let{error:a}=await t.from("reservation_lists").delete().eq("id",e);if(a)throw a},async updateReservationPlayers(e,a){let{error:r}=await t.from("player_reservations").delete().eq("reservation_id",e);if(r)throw r;if(a.length>0){let r=a.map(a=>({reservation_id:e,player_id:a})),{error:s}=await t.from("player_reservations").insert(r);if(s)throw s}}},n={async addEvent(e,a){let{data:r,error:s}=await t.from("events").insert([{name:e}]).select().single();if(s)throw s;if(a.length>0){let e=a.map(e=>({event_id:r.id,player_id:e})),{error:s}=await t.from("player_events").insert(e);if(s)throw s}let{data:l,error:n}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at)\n        )\n      ").eq("id",r.id).single();if(n)throw n;return{id:l.id,name:l.name,created_at:l.created_at,players:l.players.map(e=>e.players)}},async getLastEvent(){let{data:e,error:a}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at)\n        )\n      ").order("created_at",{ascending:!1}).limit(1).single();if(a)throw a;return e?{id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}:null},async updateEventPlayers(e,a){let{error:r}=await t.from("player_events").delete().eq("event_id",e);if(r)throw r;if(a.length>0){let r=a.map(a=>({event_id:e,player_id:a})),{error:s}=await t.from("player_events").insert(r);if(s)throw s}}}},4212:(e,a,r)=>{"use strict";r.d(a,{cn:()=>l});var t=r(4164),s=r(856);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,t.$)(a))}},3527:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>C,metadata:()=>R});var t=r(4848),s=r(6540),l=r(1741),n=r(8755);let i=(0,r(6471).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var d=r(2133),o=r(263),c=r(8200),m=r(2579),f="Avatar",[p,y]=(0,d.A)(f),[u,v]=p(f),w=s.forwardRef((e,a)=>{let{__scopeAvatar:r,...l}=e,[n,i]=s.useState("idle");return(0,t.jsx)(u,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,t.jsx)(m.sG.span,{...l,ref:a})})});w.displayName=f;var h="AvatarImage",g=s.forwardRef((e,a)=>{let{__scopeAvatar:r,src:l,onLoadingStatusChange:n=()=>{},...i}=e,d=v(h,r),f=function(e,a){let[r,t]=s.useState("idle");return(0,c.N)(()=>{if(!e){t("error");return}let r=!0,s=new window.Image,l=e=>()=>{r&&t(e)};return t("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=e,a&&(s.referrerPolicy=a),()=>{r=!1}},[e,a]),r}(l,i.referrerPolicy),p=(0,o.c)(e=>{n(e),d.onImageLoadingStatusChange(e)});return(0,c.N)(()=>{"idle"!==f&&p(f)},[f,p]),"loaded"===f?(0,t.jsx)(m.sG.img,{...i,ref:a,src:l}):null});g.displayName=h;var _="AvatarFallback",N=s.forwardRef((e,a)=>{let{__scopeAvatar:r,delayMs:l,...n}=e,i=v(_,r),[d,o]=s.useState(void 0===l);return s.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>o(!0),l);return()=>window.clearTimeout(e)}},[l]),d&&"loaded"!==i.imageLoadingStatus?(0,t.jsx)(m.sG.span,{...n,ref:a}):null});N.displayName=_;var x=r(4212);let j=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(w,{ref:a,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});j.displayName=w.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(g,{ref:a,className:(0,x.cn)("aspect-square h-full w-full",r),...s})}).displayName=g.displayName;let I=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(N,{ref:a,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});I.displayName=N.displayName;let R={title:"Player Reservation App",description:"Manage players and reservations"};function C(e){let{children:a}=e,[r,d]=(0,s.useState)(!0),[o,c]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{try{let e=await n.jv.getLastEvent();c(e)}catch(e){console.error("Failed to load event:",e)}finally{d(!1)}})()},[]),r)?(0,t.jsx)("div",{children:"Loading..."}):o?(0,t.jsx)("div",{className:"container mx-auto p-4",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#2E2A5D] to-[#7B3C7D] text-white rounded-lg p-6 shadow-lg",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4",children:o.name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("span",{children:[o.players.length," Players"]})]})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(o.players||[]).map(e=>e?(0,t.jsx)(l.Zp,{className:" transition-colors duration-200",children:(0,t.jsxs)(l.Wu,{className:"flex items-center p-4",children:[(0,t.jsx)(j,{className:"h-10 w-10 mr-4",children:(0,t.jsx)(I,{className:"bg-[#7B3C7D] text-white",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,t.jsx)("span",{className:"text-[#2E2A5D] font-medium",children:e.name})]})},e.id):null)})})]})}):(0,t.jsx)("div",{children:"No event found"})}}},e=>{var a=a=>e(e.s=a);e.O(0,[454,636,593,792],()=>a(2022)),_N_E=e.O()}]);