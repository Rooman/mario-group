(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(3527)}])},8286:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var t=a(4848);a(6540);var s=a(6990),n=a(4212);let i=(0,s.F)("inline-flex w-fit items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:a}),r),...s})}},1741:(e,r,a)=>{"use strict";a.d(r,{Wu:()=>l,Zp:()=>i});var t=a(4848),s=a(6540),n=a(4212);let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});i.displayName="Card",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...s})});l.displayName="CardContent",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8755:(e,r,a)=>{"use strict";a.d(r,{$k:()=>i,a$:()=>n,jv:()=>l,yc:()=>s});let t=(0,a(5183).UU)("https://ptakgadlsitwkrgpgwhe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YWtnYWRsc2l0d2tyZ3Bnd2hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjE4NjQ0MzUsImV4cCI6MjAzNzQ0MDQzNX0.9eRCdNNJJ3qSqiTXlWSgoH7ZCYfVtM5xyDZy7LZgIqI",{auth:{localStorage:!0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),s=["Medicover","Multisport","Classic","No card"],n={async getAllPlayers(){let{data:e,error:r}=await t.from("players").select("*").order("name");if(r)throw r;return e},async addPlayer(e,r){let{data:a,error:s}=await t.from("players").insert([{name:e,cardType:r}]).select().single();if(s)throw s;return a},async editPlayer(e,r,a){let{data:s,error:n}=await t.from("players").update({name:r,cardType:a}).eq("id",e).select().single();if(n)throw n;return s},async removePlayer(e){let{error:r}=await t.from("players").delete().eq("id",e);if(r)throw r}},i={async getAllReservationLists(){let{data:e,error:r}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at, cardType)\n        )\n      ").order("created_at",{ascending:!0});if(r)throw r;return e.map(e=>({id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}))},async addReservationList(e,r){console.log("Adding reservation list:",e,r);let{data:a,error:s}=await t.from("reservation_lists").insert([{name:e}]).select().single();if(s)throw s;if(r.length>0){let e=r.map(e=>({reservation_id:a.id,player_id:e})),{error:s}=await t.from("player_reservations").insert(e);if(s)throw s}let{data:n,error:i}=await t.from("reservation_lists").select("\n        id,\n        name,\n        created_at,\n        players:player_reservations(\n          players(id, name, created_at, cardType)\n        )\n      ").eq("id",a.id).single();if(i)throw i;return{id:n.id,name:n.name,created_at:n.created_at,players:n.players.map(e=>e.players)}},async removeReservationList(e){let{error:r}=await t.from("reservation_lists").delete().eq("id",e);if(r)throw r},async updateReservationPlayers(e,r){let{error:a}=await t.from("player_reservations").delete().eq("reservation_id",e);if(a)throw a;if(r.length>0){let a=r.map(r=>({reservation_id:e,player_id:r})),{error:s}=await t.from("player_reservations").insert(a);if(s)throw s}}},l={async addEvent(e,r){let{data:a,error:s}=await t.from("events").insert([{name:e}]).select().single();if(s)throw s;if(r.length>0){let e=r.map(e=>({event_id:a.id,player_id:e})),{error:s}=await t.from("player_events").insert(e);if(s)throw s}let{data:n,error:i}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at, cardType)\n        )\n      ").eq("id",a.id).single();if(i)throw i;return{id:n.id,name:n.name,created_at:n.created_at,players:n.players.map(e=>e.players)}},async getLastEvent(){let{data:e,error:r}=await t.from("events").select("\n        id,\n        name,\n        created_at,\n        players:player_events(\n          players(id, name, created_at, cardType)\n        )\n      ").order("created_at",{ascending:!1}).limit(1).single();if(r)throw r;return e?{id:e.id,name:e.name,created_at:e.created_at,players:e.players.map(e=>e.players)}:null},async updateEvent(e,r,a){let{error:s}=await t.from("events").update({name:r}).eq("id",e);if(s)throw s;let{error:n}=await t.from("player_events").delete().eq("event_id",e);if(n)throw n;if(a.length>0){let r=a.map(r=>({event_id:e,player_id:r})),{error:s}=await t.from("player_events").insert(r);if(s)throw s}}}},4212:(e,r,a)=>{"use strict";a.d(r,{cn:()=>n});var t=a(4164),s=a(856);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}},3527:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>k,metadata:()=>I});var t=a(4848),s=a(6540),n=a(1741),i=a(8755);let l=(0,a(6471).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var d=a(2133),o=a(263),c=a(8200),f=a(2579),p="Avatar",[m,u]=(0,d.A)(p),[y,v]=m(p),g=s.forwardRef((e,r)=>{let{__scopeAvatar:a,...n}=e,[i,l]=s.useState("idle");return(0,t.jsx)(y,{scope:a,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,t.jsx)(f.sG.span,{...n,ref:r})})});g.displayName=p;var w="AvatarImage",h=s.forwardRef((e,r)=>{let{__scopeAvatar:a,src:n,onLoadingStatusChange:i=()=>{},...l}=e,d=v(w,a),p=function(e,r){let[a,t]=s.useState("idle");return(0,c.N)(()=>{if(!e){t("error");return}let a=!0,s=new window.Image,n=e=>()=>{a&&t(e)};return t("loading"),s.onload=n("loaded"),s.onerror=n("error"),s.src=e,r&&(s.referrerPolicy=r),()=>{a=!1}},[e,r]),a}(n,l.referrerPolicy),m=(0,o.c)(e=>{i(e),d.onImageLoadingStatusChange(e)});return(0,c.N)(()=>{"idle"!==p&&m(p)},[p,m]),"loaded"===p?(0,t.jsx)(f.sG.img,{...l,ref:r,src:n}):null});h.displayName=w;var x="AvatarFallback",N=s.forwardRef((e,r)=>{let{__scopeAvatar:a,delayMs:n,...i}=e,l=v(x,a),[d,o]=s.useState(void 0===n);return s.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==l.imageLoadingStatus?(0,t.jsx)(f.sG.span,{...i,ref:r}):null});N.displayName=x;var _=a(4212);let j=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(g,{ref:r,className:(0,_.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});j.displayName=g.displayName,s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(h,{ref:r,className:(0,_.cn)("aspect-square h-full w-full",a),...s})}).displayName=h.displayName;let b=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(N,{ref:r,className:(0,_.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});b.displayName=N.displayName;var C=a(8286);let I={title:"Player Reservation App",description:"Manage players and reservations"},R=["Medicover","Multisport","Classic","No card"];function k(e){let{children:r}=e,[a,d]=(0,s.useState)(!0),[o,c]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{let e=await i.jv.getLastEvent();c(e)}catch(e){console.error("Failed to load event:",e)}finally{d(!1)}})()},[]),a)return(0,t.jsx)("div",{children:"Loading..."});if(!o)return(0,t.jsx)("div",{children:"No event found"});function f(e){switch(e){case"Medicover":return"bg-blue-100 text-blue-800";case"Multisport":return"bg-green-100 text-green-800";case"Classic":return"bg-yellow-100 text-yellow-800";case"No card":return"bg-orange-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}}let p=o.players.reduce((e,r)=>(e[r.cardType]=(e[r.cardType]||0)+1,e),{}),m=R.map(e=>({type:e,count:p[e]||0})),u=[...o.players].sort((e,r)=>R.indexOf(e.cardType)-R.indexOf(r.cardType));return(0,t.jsxs)("div",{className:"space-y-8 container mx-auto p-4",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#2E2A5D] to-[#7B3C7D] text-white rounded-lg p-6 shadow-lg",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4",children:o.name}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center ",children:[(0,t.jsx)(l,{className:"w-5 h-5 mr-2"}),(0,t.jsxs)("span",{children:[o.players.length," Players"]})]}),m.map(e=>{let{type:r,count:a}=e;return(0,t.jsxs)(C.E,{className:"".concat(f(r)," text-xs"),children:[r,": ",a]},r)})]})]})}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(u||[]).map(e=>e?(0,t.jsx)(n.Zp,{className:" transition-colors duration-200",children:(0,t.jsxs)(n.Wu,{className:"flex items-center p-4",children:[(0,t.jsx)(j,{className:"h-10 w-10 mr-4",children:(0,t.jsx)(b,{className:"bg-[#7B3C7D] text-white",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[#2E2A5D] font-medium",children:e.name}),(0,t.jsx)(C.E,{className:"mt-1 ".concat(f(e.cardType)),children:e.cardType})]})]})},e.id):null)})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[399,636,593,792],()=>r(2022)),_N_E=e.O()}]);